# Learn Architecture the Hard Way

# Introduction

### If you have any questions while reading?

You can:

- Use the search engine.
- Submit an Issue.
- Contact the author. < joverzh@gmail.com >

# What is Architecture?

## 0. Preface

本文希望以简化地方式阐述架构发展中的服务拆分过程，并不涉及分布式架构带来的数据一致性、数据库性能瓶颈等问题，希望有兴趣的读者可以通过自行了解：

- 分布式缓存
- 分布式锁
- 数据库水平/垂直切分
- 分布式事务

Let's go !

## 1. Simple Servers

目前，仅需要**单**个服务器即可满足性能需求。

```
           +-----------+
client --> | service A |
           +-----------+
```

## 2. Load Balance

当单个服务器无法满足性能需求时，开始采取**水平扩展**并引入**负载均衡**技术。

```
                          +-----------+
                        / | service A |
           +---------+ /  +-----------+
client --> | gateway |  
           +---------+ \  +-----------+
                        \ | service A |
                          +-----------+
                                .
                                .
                                .
```

## 3. Distributed Architecture

当业务达到一定量级后，开发人员需要维护的代码开始变得极为庞大和复杂，难免出现业务代码迭代时牵一发而动全身。  
因此出现**服务拆分**，从而降低开发人员的开发难度，并使得服务部署更加灵活，各个服务部署的数量可根据业务访问量自行调整。  

```
                          +-----------+
                        / | service A |----------+
           +---------+ /  +----------++service A | ...
client --> | gateway |               +-----------+
           +---------+ \  +-----------+
                        \ | service B |----------+
                          +----------++service B | ...
                                     +-----------+
                                .
                                .
                                .
```

## 4. Microservices

从实践的角度来看，**微服务架构通常也是分布式架构**，反之则未必成立，分布式架构已经可以解决了目前的大部分问题，**而微服务则更强调服务的专业化和精细分工**。  
在分布式架构中，经过业务的迭代，难免分布式服务会出现**功能重复**的现象。  
而**微服务**思想则是把复用的功能抽离成微服务。

```
                          Composite Microservices               Core Microservices

                          +-----------+                      +-----------+
                        / | service A |----------+           | service C |----------+
           +---------+ /  +----------++service A | ...    /  +----------++service C | ...
client --> | gateway |               +-----------+   \  /               +-----------+
           +---------+ \  +-----------+               X      +-----------+
                        \ | service B |----------+  /   \    | service D |----------+
                          +----------++service B | ...    \  +----------++service D | ...
                                     +-----------+ \                    +-----------+
                                .                    \       +-----------+
                                .                      \     | service E |----------+
                                .                            +----------++service E | ...
                                                                        +-----------+
                                                             +-----------+
                                                             | service F |----------+
                                                             +----------++service F | ...
                                                                        +-----------+
                                                                   .
                                                                   .
                                                                   .
```
